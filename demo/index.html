<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>marquee demo</title>
<meta content="marquee demo" name="Keywords">
<meta content="marquee demo" name="Description">
<style>
body {
	font-size:14px;
	line-height:1.5;
}
.marquee {
	width: 600px;
	height: 200px;
	position: relative;
	overflow: hidden;
	border: 1px solid #ccc;
	margin: 20px 0;
}
.marquee div {
	position: absolute;
	top: 0;
	background: RGBA(0,0,0,.4);
}
pre {
	background: #f1f1f1;
}
.btn {
	padding: 5px 20px;
	border: 1px solid black;
	border-radius: 5px;
}
</style>
</head>

<body>
<h1>超级好用的marquee</h1>
<p>这是一个marquee插件，支持传统的left,top方式移动，也支持CSS3标准的transform方式移动。</p>
<p>任何使用的问题，请联系48838096@qq.com。欢迎访问的我的个人博客：<a href="http://xhyo.com/" target="_blank">http://xhyo.com/</a>。</p>
<div class="demo">
  <h2>最简单的调用方法</h2>
  <div class="marquee" id="marquee1">
    <div>这是一个marquee插件，支持传统的left,top方式移动，也支持CSS3标准的transform方式移动。</div>
  </div>
  <pre><code>marquee(document.getElementById('marquee1'),{duration:3000});</code></pre>
  <p>初始化：marquee(element,option)</p>
  <p><code>element</code>可以是一个dom对象，也可以是一个id字符串,传入字符串的时候会缓存对象</p>
  <p><code>option</code>接收的内容可以有：</p>
  <pre><code>{
transformEnable: false, //transform模式还是位移(left/top)模式
loop:1, //循环次数,0:无限循环;>0:按次数循环
duration:5000, //移动持续时间
direction: 0, //0:从右往左；1:从下往上；2:从左往右；3:从上往下
startEvent: function(){}, //移动开始事件
endEvent: function(){}, //移动结束事件
reachEvent: function(){}, //移动元素到达边缘事件，return true的时候到达边缘后暂停。只支持位移模式
hoverEvent: function(){} //移动元素鼠标悬停事件
}</code></pre>
</div>
<div class="demo">
  <h2>综合应用demo</h2>
  <div class="marquee" id="marquee2"></div>
  <label>选择方向：<select id="direction" name="direction">
    <option value="0" selected>从右往左</option>
    <option value="1">从下往上</option>
    <option value="2">从左往右</option>
    <option value="3">从上往下</option>
  </select></label> | 
  <label>移动个数：<input type="text" name="number" id="number" value="2"></label> | 
  <label>设置时间：<input type="text" name="duration" id="duration" value="2000"></label> | 
  <label>使用transform：<input type="checkbox" name="use_html5" id="use_html5"></label> | 
  <label>循环次数：<input type="text" name="loop" id="loop" value="2"></label> | 
  <a href="#" id="just_do_it" class="btn">试一下</a> </div>
<script>
window.console = window.console || {'log':function(){}};
</script> 
<script type="text/javascript" src="jquery.min.js"></script> 
<script src="../marquee.js"></script> 
<script>
function getText() {
	var textArr = ['YY娱乐是全国最大的真人互动视频直播社区','支持百万人同时在线视频聊天','美女直播 ','K歌跳舞','视频交友','看网络节目','与明星歌手','美女主播互动就在YY娱乐社区'];
	var r = Math.floor(Math.random()*textArr.length);
	return textArr[r];
}

//最简单的调用方法
marquee(document.getElementById('marquee1'),{duration:3000});

//综合应用demo
$('#just_do_it').on('click', function(){
	var direction = $('#direction option:selected').val();
	var duration = $('#duration').val();
	var useHtml5 = $('#use_html5:checked').val();
	var loop = parseInt($('#loop').val(), 10);
	var number = parseInt($('#number').val(), 10);
	var count = 0;
	
	if(number < 1 || number > 100)
		number = 5;
	var marqueeObj = marquee('marquee2'); //marquee(document.getElementById('marquee1'),{duration:5000});
	marqueeObj.init({duration:duration,direction:direction,loop:loop,transformEnable:!!useHtml5});
	var intervalId = window.setInterval(function(){count++; if(count>=number) window.clearInterval(intervalId); marqueeObj.push($('<div>'+getText()+'</div>')[0]);}, 1000);
	return false;	
})
</script>
</body>
</html>
